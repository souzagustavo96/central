{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gustavo.souza\\\\OneDrive - INSTITUTO DONATO DE OFTALMOLOGIA LTDA\\\\Documentos\\\\PROJETOS\\\\PAINEL_BI\\\\frontend\\\\src\\\\AdminPanel.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './AdminPanel.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminPanel = () => {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [role, setRole] = useState('Usuário');\n  const [panels, setPanels] = useState([]);\n  const [selectedPanels, setSelectedPanels] = useState([]);\n  useEffect(() => {\n    // Busca usuários do Microsoft 365\n    axios.get('http://localhost:5000/users').then(response => setUsers(response.data)).catch(error => console.error('Erro ao buscar usuários:', error));\n\n    // Busca painéis do Power BI do .env\n    const availablePanels = process.env.REACT_APP_POWERBI_PANELS.split(',');\n    setPanels(availablePanels);\n  }, []);\n  const handleUserSelect = event => {\n    const userEmail = event.target.value;\n    const user = users.find(u => u.email === userEmail);\n    setSelectedUser(user);\n  };\n  const handleRoleChange = event => {\n    setRole(event.target.value);\n  };\n  const handlePanelSelection = event => {\n    const panel = event.target.value;\n    setSelectedPanels(prev => prev.includes(panel) ? prev.filter(p => p !== panel) : [...prev, panel]);\n  };\n  const savePermissions = () => {\n    axios.post('http://localhost:5000/set-permissions', {\n      email: selectedUser.email,\n      role,\n      panels: selectedPanels\n    }).then(() => alert('Permissões atualizadas com sucesso!')).catch(error => console.error('Erro ao salvar permissões:', error));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-panel\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Painel Administrativo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Usu\\xE1rio:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      onChange: handleUserSelect,\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"Selecione um usu\\xE1rio\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), users.map(user => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: user.email,\n        children: [user.name, \" (\", user.email, \")\"]\n      }, user.email, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), selectedUser && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Fun\\xE7\\xE3o:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: role,\n        onChange: handleRoleChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Usu\\xE1rio\",\n          children: \"Usu\\xE1rio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Administrador\",\n          children: \"Administrador\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Pain\\xE9is de acesso:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panels-list\",\n        children: panels.map(panel => /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            value: panel,\n            checked: selectedPanels.includes(panel),\n            onChange: handlePanelSelection\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 33\n          }, this), panel]\n        }, panel, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: savePermissions,\n        children: \"Salvar Permiss\\xF5es\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n};\n_s(AdminPanel, \"/QvIM+ANtM5DFu1Tr8GiBr6RyJo=\");\n_c = AdminPanel;\nexport default AdminPanel;\nvar _c;\n$RefreshReg$(_c, \"AdminPanel\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","AdminPanel","_s","users","setUsers","selectedUser","setSelectedUser","role","setRole","panels","setPanels","selectedPanels","setSelectedPanels","get","then","response","data","catch","error","console","availablePanels","process","env","REACT_APP_POWERBI_PANELS","split","handleUserSelect","event","userEmail","target","value","user","find","u","email","handleRoleChange","handlePanelSelection","panel","prev","includes","filter","p","savePermissions","post","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","map","name","type","checked","onClick","_c","$RefreshReg$"],"sources":["C:/Users/gustavo.souza/OneDrive - INSTITUTO DONATO DE OFTALMOLOGIA LTDA/Documentos/PROJETOS/PAINEL_BI/frontend/src/AdminPanel.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './AdminPanel.css';\r\n\r\nconst AdminPanel = () => {\r\n    const [users, setUsers] = useState([]);\r\n    const [selectedUser, setSelectedUser] = useState(null);\r\n    const [role, setRole] = useState('Usuário');\r\n    const [panels, setPanels] = useState([]);\r\n    const [selectedPanels, setSelectedPanels] = useState([]);\r\n\r\n    useEffect(() => {\r\n        // Busca usuários do Microsoft 365\r\n        axios.get('http://localhost:5000/users')\r\n            .then(response => setUsers(response.data))\r\n            .catch(error => console.error('Erro ao buscar usuários:', error));\r\n        \r\n        // Busca painéis do Power BI do .env\r\n        const availablePanels = process.env.REACT_APP_POWERBI_PANELS.split(',');\r\n        setPanels(availablePanels);\r\n    }, []);\r\n\r\n    const handleUserSelect = (event) => {\r\n        const userEmail = event.target.value;\r\n        const user = users.find(u => u.email === userEmail);\r\n        setSelectedUser(user);\r\n    };\r\n\r\n    const handleRoleChange = (event) => {\r\n        setRole(event.target.value);\r\n    };\r\n\r\n    const handlePanelSelection = (event) => {\r\n        const panel = event.target.value;\r\n        setSelectedPanels(prev =>\r\n            prev.includes(panel) ? prev.filter(p => p !== panel) : [...prev, panel]\r\n        );\r\n    };\r\n\r\n    const savePermissions = () => {\r\n        axios.post('http://localhost:5000/set-permissions', {\r\n            email: selectedUser.email,\r\n            role,\r\n            panels: selectedPanels\r\n        })\r\n        .then(() => alert('Permissões atualizadas com sucesso!'))\r\n        .catch(error => console.error('Erro ao salvar permissões:', error));\r\n    };\r\n\r\n    return (\r\n        <div className=\"admin-panel\">\r\n            <h1>Painel Administrativo</h1>\r\n            <label>Usuário:</label>\r\n            <select onChange={handleUserSelect}>\r\n                <option value=\"\">Selecione um usuário</option>\r\n                {users.map(user => (\r\n                    <option key={user.email} value={user.email}>{user.name} ({user.email})</option>\r\n                ))}\r\n            </select>\r\n            {selectedUser && (\r\n                <div>\r\n                    <label>Função:</label>\r\n                    <select value={role} onChange={handleRoleChange}>\r\n                        <option value=\"Usuário\">Usuário</option>\r\n                        <option value=\"Administrador\">Administrador</option>\r\n                    </select>\r\n\r\n                    <label>Painéis de acesso:</label>\r\n                    <div className=\"panels-list\">\r\n                        {panels.map(panel => (\r\n                            <label key={panel}>\r\n                                <input \r\n                                    type=\"checkbox\" \r\n                                    value={panel} \r\n                                    checked={selectedPanels.includes(panel)} \r\n                                    onChange={handlePanelSelection} \r\n                                />\r\n                                {panel}\r\n                            </label>\r\n                        ))}\r\n                    </div>\r\n                    <button onClick={savePermissions}>Salvar Permissões</button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminPanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}